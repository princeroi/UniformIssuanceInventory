<div class="page-header">
    <h1 class="page-title">
        <i class="fas fa-file-invoice me-2"></i>Receiving Copy Designer
    </h1>
    <p class="page-subtitle">Design and customize your receiving copy layout</p>
</div>

<div class="row g-4">
    <!-- Left Panel - Design Tools -->
    <div class="col-lg-3">
        <div class="card sticky-top" style="top: 20px;">
            <div class="card-header bg-primary text-white">
                <h6 class="mb-0"><i class="fas fa-tools me-2"></i>Design Tools</h6>
            </div>
            <div class="card-body">
                <!-- Template Selection -->
                <div class="mb-3">
                    <label class="form-label fw-bold">
                        <i class="fas fa-th-large me-1"></i> Template
                    </label>
                    <select id="templateSelect" class="form-select form-select-sm">
                        <option value="standard">Standard Layout</option>
                        <option value="modern">Modern Layout</option>
                        <option value="compact">Compact Layout</option>
                        <option value="detailed">Detailed Layout</option>
                    </select>
                </div>

                <!-- Page Settings -->
                <div class="mb-3">
                    <label class="form-label fw-bold">
                        <i class="fas fa-file me-1"></i> Page Setup
                    </label>
                    <select id="paperSize" class="form-select form-select-sm mb-2">
                        <option value="A4">A4 (210 x 297 mm)</option>
                        <option value="Letter">Letter (8.5 x 11 in)</option>
                        <option value="Legal">Legal (8.5 x 14 in)</option>
                    </select>
                    <select id="orientation" class="form-select form-select-sm">
                        <option value="portrait">Portrait</option>
                        <option value="landscape">Landscape</option>
                    </select>
                </div>

                <!-- Header Settings -->
                <div class="mb-3">
                    <label class="form-label fw-bold">
                        <i class="fas fa-heading me-1"></i> Header
                    </label>
                    <input type="text" id="headerText" class="form-control form-control-sm mb-2" value="RECEIVING REPORT" placeholder="Header Text">
                    <input type="number" id="headerSize" class="form-control form-control-sm mb-2" value="24" min="16" max="48" placeholder="Font Size">
                    <select id="headerAlign" class="form-select form-select-sm mb-2">
                        <option value="left">Left</option>
                        <option value="center" selected>Center</option>
                        <option value="right">Right</option>
                    </select>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="showLogo" checked>
                        <label class="form-check-label" for="showLogo">Show Logo</label>
                    </div>
                </div>

                <!-- Company Info -->
                <div class="mb-3">
                    <label class="form-label fw-bold">
                        <i class="fas fa-building me-1"></i> Company Info
                    </label>
                    <input type="text" id="companyName" class="form-control form-control-sm mb-2" value="ABC Corporation" placeholder="Company Name">
                    <textarea id="companyAddress" class="form-control form-control-sm" rows="2" placeholder="Company Address">123 Main Street, City, Country</textarea>
                </div>

                <!-- Logo Upload -->
                <div class="mb-3">
                    <label class="form-label fw-bold">
                        <i class="fas fa-image me-1"></i> Logo
                    </label>
                    <input type="file" id="logoUpload" class="form-control form-control-sm" accept="image/*">
                    <small class="text-muted">Max: 150x80px</small>
                </div>

                <!-- Content Sections -->
                <div class="mb-3">
                    <label class="form-label fw-bold">
                        <i class="fas fa-list-check me-1"></i> Show Sections
                    </label>
                    <div class="form-check mb-1">
                        <input class="form-check-input section-toggle" type="checkbox" id="showReceivingNo" checked>
                        <label class="form-check-label" for="showReceivingNo">Receiving Number</label>
                    </div>
                    <div class="form-check mb-1">
                        <input class="form-check-input section-toggle" type="checkbox" id="showDate" checked>
                        <label class="form-check-label" for="showDate">Date</label>
                    </div>
                    <div class="form-check mb-1">
                        <input class="form-check-input section-toggle" type="checkbox" id="showSupplier" checked>
                        <label class="form-check-label" for="showSupplier">Supplier</label>
                    </div>
                    <div class="form-check mb-1">
                        <input class="form-check-input section-toggle" type="checkbox" id="showDeliveryNo" checked>
                        <label class="form-check-label" for="showDeliveryNo">Delivery Number</label>
                    </div>
                    <div class="form-check mb-1">
                        <input class="form-check-input section-toggle" type="checkbox" id="showReceivedBy" checked>
                        <label class="form-check-label" for="showReceivedBy">Received By</label>
                    </div>
                    <div class="form-check mb-1">
                        <input class="form-check-input section-toggle" type="checkbox" id="showNotes" checked>
                        <label class="form-check-label" for="showNotes">Notes</label>
                    </div>
                    <div class="form-check mb-1">
                        <input class="form-check-input section-toggle" type="checkbox" id="showSignatures" checked>
                        <label class="form-check-label" for="showSignatures">Signatures</label>
                    </div>
                    <div class="form-check mb-1">
                        <input class="form-check-input section-toggle" type="checkbox" id="showQR">
                        <label class="form-check-label" for="showQR">QR Code</label>
                    </div>
                </div>

                <!-- Table Settings -->
                <div class="mb-3">
                    <label class="form-label fw-bold">
                        <i class="fas fa-table me-1"></i> Table Style
                    </label>
                    <select id="tableStyle" class="form-select form-select-sm mb-2">
                        <option value="bordered">Bordered</option>
                        <option value="striped">Striped</option>
                        <option value="minimal">Minimal</option>
                    </select>
                    <div class="form-check mb-1">
                        <input class="form-check-input" type="checkbox" id="showTableHeader" checked>
                        <label class="form-check-label" for="showTableHeader">Show Header</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="alternateRows" checked>
                        <label class="form-check-label" for="alternateRows">Alternate Rows</label>
                    </div>
                </div>

                <!-- Footer -->
                <div class="mb-3">
                    <label class="form-label fw-bold">
                        <i class="fas fa-align-left me-1"></i> Footer
                    </label>
                    <textarea id="footerText" class="form-control form-control-sm" rows="2">This is a computer-generated document.</textarea>
                </div>

                <!-- Action Buttons -->
                <div class="d-grid gap-2">
                    <button class="btn btn-success btn-sm" id="saveLayout">
                        <i class="fas fa-save me-1"></i> Save Layout
                    </button>
                    <button class="btn btn-info btn-sm" id="previewBtn">
                        <i class="fas fa-eye me-1"></i> Preview
                    </button>
                    <button class="btn btn-primary btn-sm" id="printBtn">
                        <i class="fas fa-print me-1"></i> Print Test
                    </button>
                    <button class="btn btn-secondary btn-sm" id="resetBtn">
                        <i class="fas fa-undo me-1"></i> Reset
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Center Panel - Live Preview -->
    <div class="col-lg-6">
        <div class="card">
            <div class="card-header bg-info text-white d-flex justify-content-between align-items-center">
                <h6 class="mb-0"><i class="fas fa-desktop me-2"></i>Live Preview</h6>
                <div class="btn-group btn-group-sm">
                    <button class="btn btn-sm btn-light" id="zoomOut" title="Zoom Out">
                        <i class="fas fa-search-minus"></i>
                    </button>
                    <button class="btn btn-sm btn-light" id="zoomReset" title="Reset Zoom">100%</button>
                    <button class="btn btn-sm btn-light" id="zoomIn" title="Zoom In">
                        <i class="fas fa-search-plus"></i>
                    </button>
                </div>
            </div>
            <div class="card-body p-0">
                <div id="previewContainer" style="overflow: auto; max-height: 85vh; background: #f5f5f5; padding: 20px;">
                    <div id="receivingPreview" style="background: white; padding: 30px; margin: 0 auto; box-shadow: 0 0 10px rgba(0,0,0,0.1); transform: scale(1); transform-origin: top center; transition: transform 0.3s;">
                        
                        <!-- Header Section -->
                        <div id="headerSection" class="text-center mb-4 pb-3 border-bottom border-2">
                            <img id="previewLogo" src="" alt="Logo" style="max-width: 150px; max-height: 80px; display: none; margin-bottom: 10px;">
                            <h2 id="previewHeader" contenteditable="true" class="fw-bold mb-2" style="cursor: text;">RECEIVING REPORT</h2>
                            <div id="companyInfoPreview">
                                <h5 id="previewCompanyName" contenteditable="true" style="cursor: text;">ABC Corporation</h5>
                                <p id="previewCompanyAddress" contenteditable="true" class="text-muted mb-0" style="cursor: text; font-size: 0.9rem;">123 Main Street, City, Country</p>
                            </div>
                        </div>

                        <!-- Info Section -->
                        <div class="row mb-4">
                            <div class="col-6">
                                <div id="receivingNoSection" class="mb-2">
                                    <strong>Receiving No:</strong> 
                                    <span contenteditable="true" style="cursor: text;">RCV-2024-001</span>
                                </div>
                                <div id="dateSection" class="mb-2">
                                    <strong>Date:</strong> 
                                    <span contenteditable="true" style="cursor: text;">December 16, 2024</span>
                                </div>
                                <div id="supplierSection" class="mb-2">
                                    <strong>Supplier:</strong> 
                                    <span contenteditable="true" style="cursor: text;">ABC Supplier Co.</span>
                                </div>
                            </div>
                            <div class="col-6">
                                <div id="deliveryNoSection" class="mb-2">
                                    <strong>Delivery No:</strong> 
                                    <span contenteditable="true" style="cursor: text;">DEL-2024-001</span>
                                </div>
                                <div id="receivedBySection" class="mb-2">
                                    <strong>Received By:</strong> 
                                    <span contenteditable="true" style="cursor: text;">John Doe</span>
                                </div>
                                <div class="mb-2">
                                    <strong>Time:</strong> 
                                    <span contenteditable="true" style="cursor: text;">2:30 PM</span>
                                </div>
                            </div>
                        </div>

                        <!-- Items Table -->
                        <div class="mb-4">
                            <table id="itemsTable" class="table table-bordered">
                                <thead class="table-light">
                                    <tr>
                                        <th width="50">#</th>
                                        <th>Item Description</th>
                                        <th width="100">Unit</th>
                                        <th width="120">Quantity</th>
                                        <th width="120">Unit Price</th>
                                        <th width="150">Total Amount</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>1</td>
                                        <td contenteditable="true" style="cursor: text;">Product A - Sample Item</td>
                                        <td>PCS</td>
                                        <td contenteditable="true" class="text-end" style="cursor: text;">100</td>
                                        <td contenteditable="true" class="text-end" style="cursor: text;">₱50.00</td>
                                        <td class="text-end">₱5,000.00</td>
                                    </tr>
                                    <tr>
                                        <td>2</td>
                                        <td contenteditable="true" style="cursor: text;">Product B - Sample Item</td>
                                        <td>PCS</td>
                                        <td contenteditable="true" class="text-end" style="cursor: text;">50</td>
                                        <td contenteditable="true" class="text-end" style="cursor: text;">₱75.00</td>
                                        <td class="text-end">₱3,750.00</td>
                                    </tr>
                                    <tr>
                                        <td>3</td>
                                        <td contenteditable="true" style="cursor: text;">Product C - Sample Item</td>
                                        <td>PCS</td>
                                        <td contenteditable="true" class="text-end" style="cursor: text;">75</td>
                                        <td contenteditable="true" class="text-end" style="cursor: text;">₱60.00</td>
                                        <td class="text-end">₱4,500.00</td>
                                    </tr>
                                </tbody>
                                <tfoot>
                                    <tr class="table-light fw-bold">
                                        <td colspan="5" class="text-end">TOTAL:</td>
                                        <td class="text-end">₱13,250.00</td>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>

                        <!-- Notes Section -->
                        <div id="notesSection" class="mb-4">
                            <div class="border-start border-3 border-primary ps-3 py-2 bg-light">
                                <strong>Notes / Remarks:</strong>
                                <p contenteditable="true" class="mb-0 mt-1" style="cursor: text;">All items inspected and verified. Goods received in good condition.</p>
                            </div>
                        </div>

                        <!-- QR Code Section -->
                        <div id="qrSection" class="text-end mb-4" style="display: none;">
                            <div class="d-inline-block border border-2 border-dashed p-3" style="width: 100px; height: 100px;">
                                <small class="text-muted">QR Code</small>
                            </div>
                        </div>

                        <!-- Signatures Section -->
                        <div id="signaturesSection" class="mt-5">
                            <div class="row">
                                <div class="col-4 text-center">
                                    <div class="border-top border-dark mt-5 pt-2">
                                        <strong>Prepared By</strong>
                                        <div class="text-muted small">Warehouse Staff</div>
                                    </div>
                                </div>
                                <div class="col-4 text-center">
                                    <div class="border-top border-dark mt-5 pt-2">
                                        <strong>Checked By</strong>
                                        <div class="text-muted small">Supervisor</div>
                                    </div>
                                </div>
                                <div class="col-4 text-center">
                                    <div class="border-top border-dark mt-5 pt-2">
                                        <strong>Approved By</strong>
                                        <div class="text-muted small">Manager</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Footer Section -->
                        <div id="footerSection" class="text-center mt-4 pt-3 border-top">
                            <small id="previewFooter" contenteditable="true" class="text-muted" style="cursor: text;">This is a computer-generated document.</small>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Right Panel - Properties & Help -->
    <div class="col-lg-3">
        <!-- Quick Tips -->
        <div class="card mb-3">
            <div class="card-header bg-success text-white">
                <h6 class="mb-0"><i class="fas fa-lightbulb me-2"></i>Quick Tips</h6>
            </div>
            <div class="card-body">
                <ul class="small mb-0 ps-3">
                    <li class="mb-2">Click any text in the preview to edit it directly</li>
                    <li class="mb-2">Use the design tools on the left to customize layout</li>
                    <li class="mb-2">Toggle sections on/off with checkboxes</li>
                    <li class="mb-2">Change templates for different styles</li>
                    <li class="mb-2">Save your layout to use it later</li>
                    <li class="mb-0">Print a test copy to see the final result</li>
                </ul>
            </div>
        </div>

        <!-- Templates Preview -->
        <div class="card mb-3">
            <div class="card-header bg-warning">
                <h6 class="mb-0"><i class="fas fa-layer-group me-2"></i>Templates</h6>
            </div>
            <div class="card-body p-2">
                <div class="row g-2">
                    <div class="col-6">
                        <div class="template-thumb border rounded p-2 text-center" style="cursor: pointer;" data-template="standard">
                            <div class="mb-1" style="height: 60px; background: linear-gradient(#e9ecef 20%, #fff 20%, #fff 80%, #e9ecef 80%);"></div>
                            <small class="d-block">Standard</small>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="template-thumb border rounded p-2 text-center" style="cursor: pointer;" data-template="modern">
                            <div class="mb-1" style="height: 60px; background: linear-gradient(#007bff 20%, #fff 20%, #fff 80%, #007bff 80%);"></div>
                            <small class="d-block">Modern</small>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="template-thumb border rounded p-2 text-center" style="cursor: pointer;" data-template="compact">
                            <div class="mb-1" style="height: 60px; background: linear-gradient(#fff 30%, #e9ecef 30%, #e9ecef 70%, #fff 70%);"></div>
                            <small class="d-block">Compact</small>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="template-thumb border rounded p-2 text-center" style="cursor: pointer;" data-template="detailed">
                            <div class="mb-1" style="height: 60px; background: repeating-linear-gradient(#fff, #fff 10px, #e9ecef 10px, #e9ecef 20px);"></div>
                            <small class="d-block">Detailed</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Saved Layouts -->
        <div class="card">
            <div class="card-header bg-secondary text-white">
                <h6 class="mb-0"><i class="fas fa-save me-2"></i>Saved Layouts</h6>
            </div>
            <div class="card-body">
                <div id="savedLayouts" class="list-group list-group-flush">
                    <a href="#" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                        <span><i class="fas fa-file-alt me-2"></i>Default Layout</span>
                        <button class="btn btn-sm btn-outline-danger"><i class="fas fa-trash"></i></button>
                    </a>
                    <a href="#" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                        <span><i class="fas fa-file-alt me-2"></i>Custom Layout 1</span>
                        <button class="btn btn-sm btn-outline-danger"><i class="fas fa-trash"></i></button>
                    </a>
                </div>
                <button class="btn btn-sm btn-outline-primary w-100 mt-2">
                    <i class="fas fa-plus me-1"></i> Load Layout
                </button>
            </div>
        </div>
    </div>
</div>

<style>
    [contenteditable="true"]:hover {
        background-color: #fff3cd;
        outline: 1px dashed #ffc107;
    }
    
    [contenteditable="true"]:focus {
        background-color: #fff3cd;
        outline: 2px solid #ffc107;
    }
    
    .template-thumb:hover {
        border-color: #007bff !important;
        box-shadow: 0 0 5px rgba(0,123,255,0.5);
    }
    
    #itemsTable td[contenteditable="true"]:hover,
    #itemsTable td[contenteditable="true"]:focus {
        background-color: #fff3cd !important;
    }
</style>